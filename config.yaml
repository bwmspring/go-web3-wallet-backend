# SERVER CONFIGURATION (服务器配置)
server:
  port: 8080
  environment: "development" # development | staging | production
  
  # JWT 认证配置
  # WARNING: 生产环境必须使用至少 32 字节的长随机密钥！
  jwt_secret: "a_very_long_and_secure_secret_key_for_production_env_32bytes"
  jwt_duration: "24h" # Token 有效期


# DATABASE CONFIGURATION (数据库配置 - PostgreSQL)
database:
  host: "localhost"
  port: "5432"
  user: "web3_user"       # 数据库用户名
  password: "admin123" # 数据库密码
  name: "web3_wallet_db"  # 数据库名

  # GORM 连接池优化 (对应 database/postgres.go 中的设置)
  # 优化目标：在高并发下保持性能和连接稳定
  # MAX_IDLE_CONNS: 设置空闲连接池中的最大连接数。
  # 推荐值：(MaxOpenConns * 0.7)
  max_idle_conns: 10
  
  # MAX_OPEN_CONNS: 设置打开数据库连接的最大数量。
  # 推荐值：根据您的数据库限制和应用并发量设定 (通常不超过 20-50)
  max_open_conns: 30
  
  # CONN_MAX_LIFETIME_MINUTES: 设置连接可重用的最大时间 (以分钟为单位)。
  # 推荐值：用于防止连接因长时间闲置而被数据库断开 (如 AWS RDS 的 8 小时限制)
  conn_max_lifetime_minutes: 30


# 区块链客户端配置
chains:
  # 1. 以太坊主网 (Ethereum Mainnet)
  - chain_id: 1
    name: "Ethereum Mainnet"
    rpc_url: "https://eth-mainnet.infura.io/v3/YOUR_KEY"
    explorer_url: "https://etherscan.io"
    # 额外的链级配置，例如 Gas 策略或默认合约
    contract_addresses:
      factory: "0xABC123..."
      weth: "0xC02aaA..."

  # 2. Polygon PoS 链
  - chain_id: 137
    name: "Polygon"
    rpc_url: "https://polygon-rpc.com"
    explorer_url: "https://polygonscan.com"
    contract_addresses:
      factory: "0xDEF456..."

  # 3. Sepolia 测试网 (Testnet)
  - chain_id: 11155111
    name: "Sepolia Testnet"
    rpc_url: "https://eth-sepolia.public.io"
    is_testnet: true


# CORS 跨域配置
cors:
  # 允许访问的源。生产环境应指定具体域名，避免使用 "*"
  allow_origins: 
    - "http://localhost:3000"
    - "https://your-dapp-domain.com"
    - "*" # 警告：生产环境慎用
  
  # 允许的 HTTP 方法
  allow_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"

  # 允许携带的 Header 字段
  allow_headers:
    - "Origin"
    - "Content-Length"
    - "Content-Type"
    - "Accept"
    - "X-Request-ID"
    - "Authorization"
  
  # 允许浏览器暴露给前端的响应 Header 字段
  expose_headers:
    - "Content-Length"
    - "X-Request-ID"

  # 是否允许携带 Cookies/认证信息 (Authorization Header)
  allow_credentials: true

  # 预检请求 (OPTIONS) 的缓存时间 (秒)，在此时间内不再发送预检请求
  max_age: 3600 # 1小时


limit:
  enable: true
  rate: 100 # 每秒允许100个请求
  bucket: 1000 # 令牌桶的容量为1000个请求